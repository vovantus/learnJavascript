<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
  let i = 0;

  let start = Date.now();

  function count() {

    // делаем часть тяжёлой работы (*)
    do {
      i++;
    } while (i % 1e6 != 0);

    if (i == 1e9) {
      alert("Done in " + (Date.now() - start) + 'ms');
    } else {
      setTimeout(count); // планируем новый вызов (**)
    }

  }

  count();




  let i = 0;

  let start = Date.now();

  function count() {

    // перенесём планирование очередного вызова в начало
    if (i < 1e9 - 1e6) {
      setTimeout(count); // запланировать новый вызов
    }

    do {
      i++;
    } while (i % 1e6 != 0);

    if (i == 1e9) {
      alert("Done in " + (Date.now() - start) + 'ms');
    }

  }

  count();



  
</script>
</body>
</html>